<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>《篡权的ss》-linux命令五分钟系列之三十一 | Linux大棚</title>
<link rel="pingback" href="http://roclinux.cn/xmlrpc.php" />
<link rel="alternate" type="application/rss+xml" title="Linux大棚 &raquo; Feed" href="http://roclinux.cn/?feed=rss2" />
<link rel="alternate" type="application/rss+xml" title="Linux大棚 &raquo; 评论Feed" href="http://roclinux.cn/?feed=comments-rss2" />
<link rel="alternate" type="application/rss+xml" title="Linux大棚 &raquo; 《篡权的ss》-linux命令五分钟系列之三十一评论Feed" href="http://roclinux.cn/?feed=rss2&#038;p=2420" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/roclinux.cn\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.2"}};
			!function(a,b,c){function d(a){var c,d=b.createElement("canvas"),e=d.getContext&&d.getContext("2d"),f=String.fromCharCode;return e&&e.fillText?(e.textBaseline="top",e.font="600 32px Arial","flag"===a?(e.fillText(f(55356,56806,55356,56826),0,0),d.toDataURL().length>3e3):"diversity"===a?(e.fillText(f(55356,57221),0,0),c=e.getImageData(16,16,1,1).data.toString(),e.fillText(f(55356,57221,55356,57343),0,0),c!==e.getImageData(16,16,1,1).data.toString()):("simple"===a?e.fillText(f(55357,56835),0,0):e.fillText(f(55356,57135),0,0),0!==e.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='wp-pagenavi-css'  href='http://roclinux.cn/wp-content/plugins/wp-pagenavi/pagenavi-css.css?ver=2.70' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='http://roclinux.cn/wp-content/plugins/wp-syntax/css/wp-syntax.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='cloudy-css'  href='http://roclinux.cn/wp-content/themes/cloudy/style.css?ver=4.4.2' type='text/css' media='all' />
<link rel='stylesheet' id='cloudy-print-css'  href='http://roclinux.cn/wp-content/themes/cloudy/print.css?ver=false' type='text/css' media='print' />
<link rel='https://api.w.org/' href='http://roclinux.cn/?rest_route=/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://roclinux.cn/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://roclinux.cn/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='《和netstat说再见》-linux命令五分钟系列之三十' href='http://roclinux.cn/?p=2418' />
<link rel='next' title='《iproute2工具套装》-linux命令五分钟系列之三十二' href='http://roclinux.cn/?p=2433' />
<meta name="generator" content="WordPress 4.4.2" />
<link rel="canonical" href="http://roclinux.cn/?p=2420" />
<link rel='shortlink' href='http://roclinux.cn/?p=2420' />
<link rel="alternate" type="application/json+oembed" href="http://roclinux.cn/?rest_route=%2Foembed%2F1.0%2Fembed&#038;url=http%3A%2F%2Froclinux.cn%2F%3Fp%3D2420" />
<link rel="alternate" type="text/xml+oembed" href="http://roclinux.cn/?rest_route=%2Foembed%2F1.0%2Fembed&#038;url=http%3A%2F%2Froclinux.cn%2F%3Fp%3D2420&#038;format=xml" />
<style type="text/css">
        #header {
            background: url(http://roclinux.cn/wp-content/uploads/2010/06/cropped-heading.jpg) 0 52px no-repeat;
        }
        #heading a,
        #heading .description {
            color: #ffffff;
        }
    </style><style type="text/css" id="custom-background-css">
body.custom-background { background-color: #b9dee8; }
</style>
<!-- wp thread comment 1.4.9.4.002 -->
<style type="text/css" media="screen">
.editComment, .editableComment, .textComment{
	display: inline;
}
.comment-childs{
	border: 1px solid #999;
	margin: 5px 2px 2px 4px;
	padding: 4px 2px 2px 4px;
	background-color: white;
}
.chalt{
	background-color: #E2E2E2;
}
#newcomment{
	border:1px dashed #777;width:90%;
}
#newcommentsubmit{
	color:red;
}
.adminreplycomment{
	border:1px dashed #777;
	width:99%;
	margin:4px;
	padding:4px;
}
.mvccls{
	color: #999;
}
			
</style>
<script>
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?b66ee8a8373e03de8a5ff8e385d78f15";
      var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
})();
</script>
</head>
<body class="single single-post postid-2420 single-format-standard custom-background">
    <div id="root">
    	<div id="header">
            <div id="access" role="navigation">
                                <div class="menu-header"><ul id="menu-rocmenu" class="menu"><li id="menu-item-3742" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-3742"><a href="http://roclinux.cn/">首页</a></li>
<li id="menu-item-3798" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3798"><a href="http://roclinux.cn/?page_id=3775"><font color=yellow>【看日记学git】</font></a></li>
<li id="menu-item-3799" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3799"><a href="http://roclinux.cn/?page_id=3763"><font color=yellow>【别怕Linux编程】</font></a></li>
<li id="menu-item-3745" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3745"><a href="http://roclinux.cn/?page_id=960">发文流程</a></li>
<li id="menu-item-3748" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3748"><a href="http://roclinux.cn/?page_id=9">版权声明</a></li>
<li id="menu-item-3797" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3797"><a href="http://roclinux.cn/?feed=rss2">RSS</a></li>
</ul></div>            </div>
            <form action="http://roclinux.cn/" id="searchform"><div class="search"><label for="s">Search:</label><input type="text" class="text" value="" name="s" id="s"><input class="button" type="submit" value="Go!" /></div></form><img src="http://roclinux.cn/wp-content/themes/cloudy/img/spacer.gif" alt="WP_Cloudy" />
            <div id="heading">
                                    <h1><a href="http://roclinux.cn">Linux大棚</a></h1>
                    <div class="description">体会Linux，体会一种生活方式。</div>
                            </div>
            <div id="about">
                                    <strong>欢迎你的到来：</strong><br/>
                                我们希望这里留下你们的脚印：最诚心学习Linux的小鸟们，最热爱Linux的朋友们，最精通Linux的高手们。

我们的希望从2008年9月9日开始。                <p></p>
                    <div class="alignright">
                        <em>roc</em>
                    </div>
                            </div>
    	</div><!--#header-->
        <div id="main">
<div id="left-block">
    <div class="box"><h3>捐款 &#8211; 点击红心</h3>			<div class="textwidget">如果博文对您有所帮助，希望能得到您的鼓励捐款。
<br /><br />
<a href=http://roclinux.cn/?page_id=2959><img src=http://roclinux.cn/wp-content/uploads/2016/01/donate_icon_172.png></img></a></div>
		</div><div class="box"><h3>专题</h3><div class="menu-category_list-container"><ul id="menu-category_list" class="menu"><li id="menu-item-3789" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3789"><a href="http://roclinux.cn/?page_id=3769">官方发布</a></li>
<li id="menu-item-3786" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3786"><a href="http://roclinux.cn/?page_id=3775">看日记学git</a></li>
<li id="menu-item-3792" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3792"><a href="http://roclinux.cn/?page_id=3763">别怕Linux编程</a></li>
<li id="menu-item-3794" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3794"><a href="http://roclinux.cn/?page_id=3759">Linux命令五分钟</a></li>
<li id="menu-item-3795" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3795"><a href="http://roclinux.cn/?page_id=3755">fedora专题</a></li>
<li id="menu-item-3790" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3790"><a href="http://roclinux.cn/?page_id=3767">名书名人</a></li>
<li id="menu-item-3793" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3793"><a href="http://roclinux.cn/?page_id=3761">不能不懂脚本</a></li>
<li id="menu-item-3784" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3784"><a href="http://roclinux.cn/?page_id=3779">站长发言</a></li>
<li id="menu-item-3787" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3787"><a href="http://roclinux.cn/?page_id=3773">每日E文</a></li>
<li id="menu-item-3791" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3791"><a href="http://roclinux.cn/?page_id=3765">北邮人技术笔试</a></li>
<li id="menu-item-3783" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3783"><a href="http://roclinux.cn/?page_id=3781">谈天说地</a></li>
<li id="menu-item-3788" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3788"><a href="http://roclinux.cn/?page_id=3771">手把手教你建博客</a></li>
<li id="menu-item-3785" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3785"><a href="http://roclinux.cn/?page_id=3777">硬件我发烧</a></li>
</ul></div></div><div class="box"><h3>官方微博</h3>			<div class="textwidget"><iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=1&ptype=1&speed=0&skin=5&isTitle=0&noborder=0&isWeibo=1&isFans=0&uid=1751201045&verifier=90e9f3a2&dpc=1"></iframe></div>
		</div>		<div class="box">		<h3>看看最新文章</h3>		<ul>
					<li>
				<a href="http://roclinux.cn/?p=3871">奇葩RFC，对要求等级的约定</a>
						</li>
					<li>
				<a href="http://roclinux.cn/?p=3731">《海量运维、运营规划之道》- 写给运维架构师</a>
						</li>
					<li>
				<a href="http://roclinux.cn/?p=3666">哪些公司在赞助Velocity性能与运维大会？</a>
						</li>
					<li>
				<a href="http://roclinux.cn/?p=3592">Google C++编程规范 – 第三十九条 -《访问控制》</a>
						</li>
					<li>
				<a href="http://roclinux.cn/?p=3590">Google C++编程规范 – 第三十八条 -《运算符重载》</a>
						</li>
					<li>
				<a href="http://roclinux.cn/?p=3588">Google C++编程规范 – 第三十七条 -《接口》</a>
						</li>
					<li>
				<a href="http://roclinux.cn/?p=3586">Google C++编程规范 – 第三十六条 -《多重继承》</a>
						</li>
					<li>
				<a href="http://roclinux.cn/?p=3584">Google C++编程规范 – 第三十五条 -《继承》</a>
						</li>
					<li>
				<a href="http://roclinux.cn/?p=3580">Google C++编程规范 – 第三十四条 -《结构体和类》</a>
						</li>
					<li>
				<a href="http://roclinux.cn/?p=3504">Google C++编程规范 – 第三十三条 -《委托构造函数和继承构造函数》</a>
						</li>
				</ul>
		</div>		<div class="box"><h3>文章发布时间日历</h3><div id="calendar_wrap" class="calendar_wrap"><table id="wp-calendar">
	<caption>2016年三月</caption>
	<thead>
	<tr>
		<th scope="col" title="星期一">一</th>
		<th scope="col" title="星期二">二</th>
		<th scope="col" title="星期三">三</th>
		<th scope="col" title="星期四">四</th>
		<th scope="col" title="星期五">五</th>
		<th scope="col" title="星期六">六</th>
		<th scope="col" title="星期日">日</th>
	</tr>
	</thead>

	<tfoot>
	<tr>
		<td colspan="3" id="prev"><a href="http://roclinux.cn/?m=201503">&laquo; 3月</a></td>
		<td class="pad">&nbsp;</td>
		<td colspan="3" id="next" class="pad">&nbsp;</td>
	</tr>
	</tfoot>

	<tbody>
	<tr>
		<td colspan="1" class="pad">&nbsp;</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td>
	</tr>
	<tr>
		<td>7</td><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td>
	</tr>
	<tr>
		<td>14</td><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td>
	</tr>
	<tr>
		<td>21</td><td id="today">22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td>
	</tr>
	<tr>
		<td>28</td><td>29</td><td>30</td><td>31</td>
		<td class="pad" colspan="3">&nbsp;</td>
	</tr>
	</tbody>
	</table></div></div></div><!--#left-block-->
    <div id="main-block">
        <div class="left-line">
            <div id="content">
            	                    <ul>
                    	                        	<li class="post-2420 post type-post status-publish format-standard hentry category-5min_command tag-iproute tag-linux tag-netstat tag-ss tag-7 tag-6" id="post-2420">
                                <div class="date"><a href="http://roclinux.cn/?p=2420" rel="nofollow">10<span>7月</span></a></div>
                                <div class="title">
                                    <h2><a href="http://roclinux.cn/?p=2420" rel="bookmark" title="Permalink to: 《篡权的ss》-linux命令五分钟系列之三十一">《篡权的ss》-linux命令五分钟系列之三十一</a></h2>
                                </div>
                                <div class="postdata">
                                    <span class="category"><a href="http://roclinux.cn/?cat=3" rel="category">Linux命令五分钟</a></span>
                                </div>
                        		<div class="entry">
                                                                    		    <p><strong>本原创文章属于<a href="http://roclinux.cn/" target="_blank">《Linux大棚》</a>博客。</strong></p>
<p><strong>博客地址为<a href="http://roclinux.cn/" target="_blank">http://roclinux.cn</a>。</strong></p>
<p><strong>文章作者为roc。</strong></p>
<p><strong>===</strong></p>
<p>上篇文章<a href="http://roclinux.cn/?p=2418" target="_blank">《和netstat说再见》</a>中说到netstat已经被抛弃，取而代之的是ss命令。一些朋友在问“netstat为什么会被抛弃呢？ss又是什么命令呢？”</p>
<p>这篇文章，我们就来揭晓答案，重点说一说“篡权的ss”。</p>
<p><strong>【作者粗心大意？】</strong></p>
<p>ss命令是一个用来查看socket信息的命令，通过man ss可以看到，这是由一位俄罗斯人编写的工具，作者的名字显示是Alexey Kuznetosv。</p>
<p><span id="more-2420"></span></p>
<p><img title="ss-name" alt="" src="http://roclinux.cn/wp-content/uploads/2012/07/ss-name.png" width="549" height="166" /></p>
<p>但是，当我google这个名字，或者根据<a href="http://www.inr.ac.ru/" target="_blank">作者提供的邮箱地址所在的网站</a>去查看，都发现他的名字本应是Alexey Kuznetsov，区别在于最后的tsov或者tosv。</p>
<p>因为没有学过俄语，所以不知道俄语里是不是本身就允许这样颠倒字母顺序，但是我还是发了封email用英语提醒了一下他，看看是不是因为Alexey粗心大意，连自己的名字都写错了。</p>
<p>如果tsov和tosv是的确是同一个人的话，那么我搜索到的这位便是ss的作者了：</p>
<p><img class="size-full wp-image-2428" title="P1010975" alt="" src="http://roclinux.cn/wp-content/uploads/2012/07/P1010975.jpg" width="603" height="481" /></p>
<p>Alexey目前已经不负责ss命令的维护更新，而是在专注于Linux Kernel QoS方面的工作。</p>
<p><strong>【十秒认识ss】</strong></p>
<p>ss是Socket Statistics的缩写。</p>
<p>顾名思义，ss命令可以用来获取socket统计信息，它可以显示和netstat类似的内容。但ss的优势在于它能够显示更多更详细的有关TCP和连接状态的信息，而且比netstat更快速更高效。</p>
<p><strong>【和netstat说再见的原因】</strong></p>
<p>当服务器的socket连接数量变得非常大时，无论是使用netstat命令还是直接cat /proc/net/tcp，执行速度都会很慢。可能你不会有切身的感受，但请相信我，当服务器维持的连接达到上万个的时候，使用netstat等于浪费 生命，而用ss才是节省时间。</p>
<p>天下武功唯快不破。ss快的秘诀在于，它利用到了TCP协议栈中tcp_diag。tcp_diag是一个用于分析统计的模块，可以获得Linux 内核中第一手的信息，这就确保了ss的快捷高效。当然，如果你的系统中没有tcp_diag，ss也可以正常运行，只是效率会变得稍慢。（但仍然比 netstat要快。）</p>
<p><strong>【用数据说话】</strong></p>
<p>为了让你更坚决的和netstat说再见，列举一些测试数据，以便证明ss的确名不虚传。</p>
<p>当服务器维持3万个socket连接，Admin需要计算具体的连接数量时，不同情况的耗时如下：</p>
<pre>netstat -at | wc  耗时 15.60 秒
ss -atr     | wc  耗时  5.40 秒（未利用tcp_diag）
ss -atr     | wc  耗时  0.47 秒（利用tcp_diag）</pre>
<p><strong>【好马配上好鞍】</strong></p>
<p>几乎所有的Linux系统都会默认包含netstat命令，但并非所有系统都会默认包含ss命令。netstat命令是net-tools工具集中的一员：</p>
<pre>#rpm -q net-tools
net-tools-1.60-109.el6.i686</pre>
<p>而ss命令是iproute工具集中的一员：</p>
<pre>#rpm -qf /usr/sbin/ss
iproute-2.6.32-17.el6.i686
#rpm -q iproute
iproute-2.6.32-17.el6.i686</pre>
<p>如果你无法使用ss命令，那么可能是缺少了iproute，需要安装一下：</p>
<pre>yum install iproute iproute-doc</pre>
<p><strong>【前浪net-tools和后浪iproute】</strong></p>
<p>net-tools是一套标准的Unix网络工具，用于配置网络接口、设置路由表信息、管理ARP表、显示和统计各类网络信息等等，但是遗憾的是，这个工具自2001年起便不再更新和维护了。</p>
<p>长江后浪推荐前浪。</p>
<p>即将隆重登场的便是iproute，这是一套可以支持IPv4/IPv6网络的用于管理TCP/UDP/IP网络的工具集，这套工具由<a href="http://www.blogger.com/profile/01514158449435119324" target="_blank">Stephen Hemminger</a>负责维护和升级，目前的大版本号是2。我们来认识一下Stephen：</p>
<p><img class="size-full wp-image-2429" title="stephen_hemminger" alt="" src="http://roclinux.cn/wp-content/uploads/2012/07/stephen_hemminger.jpg" width="100" height="131" /></p>
<p>从某种意义上说，iproute工具集几乎可以替代掉net-tools工具集，具体的替代方案是这样的：</p>
<table border="1">
<tbody>
<tr>
<td><strong>用途</strong></td>
<td><strong>net-tool（被淘汰）</strong></td>
<td><strong>iproute2</strong></td>
</tr>
<tr>
<td>地址和链路配置</td>
<td>ifconfig</td>
<td>ip addr, ip link</td>
</tr>
<tr>
<td>路由表</td>
<td>route</td>
<td>ip route</td>
</tr>
<tr>
<td>邻居</td>
<td>arp</td>
<td>ip neigh</td>
</tr>
<tr>
<td>VLAN</td>
<td>vconfig</td>
<td>ip link</td>
</tr>
<tr>
<td>隧道</td>
<td>iptunnel</td>
<td>ip tunnel</td>
</tr>
<tr>
<td>组播</td>
<td>ipmaddr</td>
<td>ip maddr</td>
</tr>
<tr>
<td>统计</td>
<td>netstat</td>
<td>ss</td>
</tr>
</tbody>
</table>
<p><strong>【版本和帮助】</strong></p>
<p>想获得ss命令的帮助信息和版本信息，都非常简单，你应该可以猜到的：</p>
<pre>#ss -h //获得帮助信息，直接man ss会更全面
#ss -V //取得版本号，-v也支持
ss utility, iproute2-ss091226</pre>
<p><strong>【ss选项统计】</strong></p>
<p>ss的选项既不多也不复杂，除去非功能性选项（-h/-v）外，ss共有22个选项。</p>
<p>每一个选项都是既支持短选项（如-s），也支持长选项（如–summary）。</p>
<p>我们不会在这里一一介绍，因为这样既枯燥又乏味，而且不出三分钟，你就会昏昏欲睡了。所以，我们会从实际需求和实际问题出发，这样效果会好些。</p>
<p><strong>【场景一：我想查看当前服务器的网络连接统计】</strong></p>
<pre>$ ss -s
Total: 295 (kernel 312)
TCP:   48 (estab 1, closed 31, orphaned 0, synrecv 0, timewait 0/0), ports 13

Transport Total     IP        IPv6
*         312       -         -
RAW       0         0         0
UDP       2         2         0
TCP       17        12        5
INET      19        14        5
FRAG      0         0         0</pre>
<p>在服务器产生大量sockets连接时，我们会使用这个命令在做宏观统计。</p>
<p><strong>【场景二：我想查看所有打开的网络端口】</strong></p>
<pre>$ ss -l
Recv-Q Send-Q           Local Address:Port               Peer Address:Port
0      128                         :::webcache                      :::*
0      128                         :::http                         :::*
0      128                         :::snapenetio                      :::*
0      128                          *:snapenetio                       *:*
0      50                           *:8531                          *:*
0      9                           :::ftp                          :::*
0      9                            *:ftp                           *:*
0      128                          *:ddi-tcp-1                       *:*
0      100                        ::1:smtp                         :::*
0      100                  127.0.0.1:smtp                          *:*
0      128                          *:8541                          *:*
0      128                  127.0.0.1:entextxid                       *:*
0      50                           *:12421                         *:*
0      10                           *:amqp                          *:*
0      128                          *:12521                         *:*
0      50                           *:mysql                         *:*</pre>
<p>如果使用-pl参数的话，则会列出具体的程序名称。你会在输出中看到类似于这样的内容：</p>
<pre>("nginx",15786,6)</pre>
<p>从中可以知道，某个socket连接是属于nginx程序的，nginx程序的PID是15786。</p>
<p><strong>【场景三：我想查看这台服务器上所有的socket连接】</strong></p>
<p>很简单，直接使用-a选项即可列出所有网络连接。</p>
<pre>#ss -a</pre>
<p>如果只想查看TCP sockets，那么使用-ta选项；<br />
如果只想查看UDP sockets，那么使用-ua选项；<br />
如果只想查看RAW sockets，那么使用-wa选项；<br />
如果只想查看UNIX sockets，那么使用-xa选项。</p>
<p><strong>【参考文献】</strong></p>
<p>1 http://en.wikipedia.org/wiki/Iproute2<br />
2 http://en.wikipedia.org/wiki/Netstat<br />
3 http://www.cyberciti.biz/files/ss.html<br />
4 http://it.toolbox.com/blogs/locutus/what-is-this-ss-program-thingy-14083<br />
5 http://www.cyberciti.biz/tips/linux-investigate-sockets-network-connections.html<br />
6 http://www.policyrouting.org/iproute2.doc.html</p>
<p>谢谢您的阅读！<em>[未完待续&#8230;]</em></p>
                        		</div>
                                <div class="link-pages">
                                                                    </div>
                        		<p>作者 rocrocket 于 9:04 下午 </p>
                        		<p>文章标签: <a href="http://roclinux.cn/?tag=iproute" rel="tag">iproute</a>, <a href="http://roclinux.cn/?tag=linux" rel="tag">linux</a>, <a href="http://roclinux.cn/?tag=netstat" rel="tag">netstat</a>, <a href="http://roclinux.cn/?tag=ss" rel="tag">ss</a>, <a href="http://roclinux.cn/?tag=%e4%ba%94%e5%88%86%e9%92%9f" rel="tag">五分钟</a>, <a href="http://roclinux.cn/?tag=%e5%91%bd%e4%bb%a4" rel="tag">命令</a></p>                        	</li>
                    	                     </ul>
                    
<!-- You can start editing here. -->

    <h3>7 Comments to <em>《篡权的ss》-linux命令五分钟系列之三十一</em></h3>
    <ul class="comments-list">		<li id="comment-3650" class="comment even thread-even depth-1">
			<article id="div-comment-3650" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
												<b class="fn"><a href='http://twitter.com/gamerh2o' rel='external nofollow' class='url'>GamerH2o</a></b><span class="says">说道：</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://roclinux.cn/?p=2420#comment-3650">
							<time datetime="2012-07-10T22:26:42+00:00">
								七月 10, 2012 10:26 下午							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>新命令输出格式不是很易读的样子，主要是没有用 tab 作成表格的形式。</p>
<p class="thdrpy"><a href="javascript:void(0)" onclick="movecfm(event,3650,1,'GamerH2o');">回复</a></p>				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-3660" class="comment odd alt thread-odd thread-alt depth-1">
			<article id="div-comment-3660" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
												<b class="fn">Meow</b><span class="says">说道：</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://roclinux.cn/?p=2420#comment-3660">
							<time datetime="2012-07-15T22:40:52+00:00">
								七月 15, 2012 10:40 下午							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>ss -l 能不能显示端口号而不是服务名称啊，有些端口自己设的跟惯例的服务名对不上啊。</p>
<p class="thdrpy"><a href="javascript:void(0)" onclick="movecfm(event,3660,1,'Meow');">回复</a></p>				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-3661" class="comment even thread-even depth-1">
			<article id="div-comment-3661" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
												<b class="fn">Meow</b><span class="says">说道：</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://roclinux.cn/?p=2420#comment-3661">
							<time datetime="2012-07-15T22:42:50+00:00">
								七月 15, 2012 10:42 下午							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>刚刚在帮助里找打了，是ss -ln</p>
<p class="thdrpy"><a href="javascript:void(0)" onclick="movecfm(event,3661,1,'Meow');">回复</a></p>				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-3670" class="pingback odd alt thread-odd thread-alt depth-1">
			<article id="div-comment-3670" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
												<b class="fn"><a href='http://tonyhack.dyndns-ip.com/wordpress/?p=327' rel='external nofollow' class='url'>Tonyhack Note &raquo; 跟netstat說再見</a></b><span class="says">说道：</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://roclinux.cn/?p=2420#comment-3670">
							<time datetime="2012-07-20T21:35:05+00:00">
								七月 20, 2012 9:35 下午							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>[&#8230;] <a href="http://roclinux.cn/?p=2420" rel="nofollow">http://roclinux.cn/?p=2420</a>     留言：0 個 標籤：    作者：tony  更多關於tony的文章》 [&#8230;]</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-4335" class="pingback even thread-even depth-1">
			<article id="div-comment-4335" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
												<b class="fn"><a href='http://code.zc4u.com/articles/12335.html' rel='external nofollow' class='url'>一些鲜为人知的但却很有趣的Unix/Linux命令（三） | 编程·早晨</a></b><span class="says">说道：</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://roclinux.cn/?p=2420#comment-4335">
							<time datetime="2013-01-22T20:06:19+00:00">
								一月 22, 2013 8:06 下午							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>[&#8230;]  篡权的ss [&#8230;]</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-4667" class="pingback odd alt thread-odd thread-alt depth-1">
			<article id="div-comment-4667" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
												<b class="fn"><a href='http://www.diguage.com/archives/96.html' rel='external nofollow' class='url'>一些鲜为人知的但却很有趣的Unix/Linux命令（三） | &quot;地瓜哥&quot;博客网</a></b><span class="says">说道：</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://roclinux.cn/?p=2420#comment-4667">
							<time datetime="2013-03-26T00:00:25+00:00">
								三月 26, 2013 12:00 上午							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>[&#8230;]  篡权的ss [&#8230;]</p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-66290" class="comment even thread-even depth-1">
			<article id="div-comment-66290" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
												<b class="fn"><a href='http://ulricqin.com/' rel='external nofollow' class='url'>UlricQin</a></b><span class="says">说道：</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://roclinux.cn/?p=2420#comment-66290">
							<time datetime="2014-07-30T14:19:11+00:00">
								七月 30, 2014 2:19 下午							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>赞一个，您的文章帮了我的忙，非常感谢</p>
<p class="thdrpy"><a href="javascript:void(0)" onclick="movecfm(event,66290,1,'UlricQin');">回复</a></p>				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
</li><!-- #comment-## -->
</ul>
    

    				<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">发表评论 <small><a rel="nofollow" id="cancel-comment-reply-link" href="/?p=2420#respond" style="display:none;">取消回复</a></small></h3>				<form action="http://roclinux.cn/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate>
					<p class="comment-notes"><span id="email-notes">电子邮件地址不会被公开。</span> 必填项已用<span class="required">*</span>标注</p><p class="comment-form-comment"><label for="comment">评论</label> <textarea id="comment" name="comment" cols="45" rows="8"  aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">姓名 <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">电子邮件 <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">站点</label> <input id="url" name="url" type="url" value="" size="30" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="发表评论" /> <input type='hidden' name='comment_post_ID' value='2420' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="beb984c0c6" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="130"/></p><p><input type="hidden" id="comment_reply_ID" name="comment_reply_ID" value="0" /><input type="hidden" id="comment_reply_dp" name="comment_reply_dp" value="0" /></p><div id="cancel_reply" style="display:none;"><a href="javascript:void(0)" onclick="movecfm(null,0,1,null);" style="color:red;">取消回复</a></div><script type="text/javascript">
/* <![CDATA[ */
var commentformid = "respond";
var USERINFO = false;
var atreply = "authorlink";
/* ]]> */
</script>
<script type="text/javascript" src="http://roclinux.cn/wp-content/plugins/wordpress-thread-comment/wp-thread-comment.js.php?jsver=common"></script>
				</form>
					</div><!-- #respond -->
		                            </div><!--#content-->
        </div><!--.left-line-->
                    <div id="footer">
			<span class="copyright">&copy; 2016 Linux大棚. All Rights Reserved.</span>
                        <span class="links">
                            <a href="http://roclinux.cn/?feed=rss2" title="Syndicate this site using RSS" class="rss">Entries <abbr title="Really Simple Syndication">RSS</abbr></a>
                            <a href="http://roclinux.cn/?feed=comments-rss2" title="The latest comments to all posts in RSS" class="rss">Comments <abbr title="Really Simple Syndication">RSS</abbr></a>
                        </span>
                    </div><!--#footer-->
                <!--#do not delete this part#-->
                </div><!--#main-block-->
            </div><!--#main-->
        </div><!--#root-->
	<script type='text/javascript' src='http://roclinux.cn/wp-content/plugins/akismet/_inc/form.js?ver=3.1.8'></script>
<script type='text/javascript' src='http://roclinux.cn/wp-includes/js/wp-embed.min.js?ver=4.4.2'></script>
    </body>
</html>
